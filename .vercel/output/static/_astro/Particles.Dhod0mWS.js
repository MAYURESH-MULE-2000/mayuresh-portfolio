import{_ as j}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as q,a as L,n as k,r as v,q as g,j as A,s as I,o as T}from"./runtime-core.esm-bundler.BnNiQXWc.js";const V={__name:"Particles",props:{className:{type:String,default:""},quantity:{type:Number,default:100},staticity:{type:Number,default:50},ease:{type:Number,default:50},size:{type:Number,default:.4},refresh:{type:Boolean,default:!1},color:{type:String,default:"#ffffff"},vx:{type:Number,default:0},vy:{type:Number,default:0}},setup(N,{expose:P}){P();const n=N,i=v(null),m=v(null),s=v(null),p=v([]),h=v({x:0,y:0}),y=v({x:0,y:0}),t=v({w:0,h:0}),d=typeof window<"u"?window.devicePixelRatio:1;let c=null;function E(e){e=e.replace("#",""),e.length===3&&(e=e.split("").map(r=>r+r).join(""));const a=parseInt(e,16),o=a>>16&255,l=a>>8&255,u=a&255;return[o,l,u]}const z=e=>{h.value={x:e.clientX,y:e.clientY}},R=()=>{if(i.value){const e=i.value.getBoundingClientRect(),{w:a,h:o}=t.value,l=h.value.x-e.left-a/2,u=h.value.y-e.top-o/2;l<a/2&&l>-a/2&&u<o/2&&u>-o/2&&(y.value.x=l,y.value.y=u)}},S=()=>{m.value&&i.value&&s.value&&(p.value=[],t.value.w=m.value.offsetWidth,t.value.h=m.value.offsetHeight,i.value.width=t.value.w*d,i.value.height=t.value.h*d,i.value.style.width=`${t.value.w}px`,i.value.style.height=`${t.value.h}px`,s.value.scale(d,d))},_=()=>{const e=Math.floor(Math.random()*t.value.w),a=Math.floor(Math.random()*t.value.h),o=0,l=0,u=Math.floor(Math.random()*2)+n.size,r=0,w=parseFloat((Math.random()*.6+.1).toFixed(1)),C=(Math.random()-.5)*.1,F=(Math.random()-.5)*.1,B=.1+Math.random()*4;return{x:e,y:a,translateX:o,translateY:l,size:u,alpha:r,targetAlpha:w,dx:C,dy:F,magnetism:B}},x=(e,a=!1)=>{if(s.value){const{x:o,y:l,translateX:u,translateY:r,size:w,alpha:C}=e,F=E(n.color);s.value.translate(u,r),s.value.beginPath(),s.value.arc(o,l,w,0,2*Math.PI),s.value.fillStyle=`rgba(${F.join(", ")}, ${C})`,s.value.fill(),s.value.setTransform(d,0,0,d,0,0),a||p.value.push(e)}},M=()=>{s.value&&s.value.clearRect(0,0,t.value.w,t.value.h)},X=()=>{M();const e=n.quantity;for(let a=0;a<e;a++){const o=_();x(o)}},Y=(e,a,o,l,u)=>{const r=(e-a)*(u-l)/(o-a)+l;return r>0?r:0},b=()=>{M(),p.value.forEach((e,a)=>{const l=[e.x+e.translateX-e.size,t.value.w-e.x-e.translateX-e.size,e.y+e.translateY-e.size,t.value.h-e.y-e.translateY-e.size].reduce((r,w)=>Math.min(r,w)),u=parseFloat(Y(l,0,20,0,1).toFixed(2));if(u>1?(e.alpha+=.02,e.alpha>e.targetAlpha&&(e.alpha=e.targetAlpha)):e.alpha=e.targetAlpha*u,e.x+=e.dx+n.vx,e.y+=e.dy+n.vy,e.translateX+=(y.value.x/(n.staticity/e.magnetism)-e.translateX)/n.ease,e.translateY+=(y.value.y/(n.staticity/e.magnetism)-e.translateY)/n.ease,x(e,!0),e.x<-e.size||e.x>t.value.w+e.size||e.y<-e.size||e.y>t.value.h+e.size){p.value.splice(a,1);const r=_();x(r)}}),c=window.requestAnimationFrame(b)},f=()=>{S(),X()};g(h,()=>{R()}),g(()=>n.color,()=>{f()}),g(()=>n.refresh,()=>{f()}),A(()=>{i.value&&(s.value=i.value.getContext("2d")),f(),b(),window.addEventListener("mousemove",z),window.addEventListener("resize",f)}),I(()=>{window.removeEventListener("mousemove",z),window.removeEventListener("resize",f),c&&window.cancelAnimationFrame(c)});const $={props:n,canvasRef:i,canvasContainerRef:m,context:s,circles:p,mousePosition:h,mouse:y,canvasSize:t,dpr:d,get animationFrameId(){return c},set animationFrameId(e){c=e},hexToRgb:E,handleMouseMove:z,onMouseMove:R,resizeCanvas:S,circleParams:_,drawCircle:x,clearContext:M,drawParticles:X,remapValue:Y,animate:b,initCanvas:f,ref:v,onMounted:A,onUnmounted:I,watch:g};return Object.defineProperty($,"__isScriptSetup",{enumerable:!1,value:!0}),$}},H={ref:"canvasRef",class:"size-full"};function O(N,P,n,i,m,s){return T(),q("div",{ref:"canvasContainerRef",class:k(["pointer-events-none",n.className]),"aria-hidden":"true"},[L("canvas",H,null,512)],2)}const D=j(V,[["render",O]]);export{D as default};
