import{g as q,a as G,s as H,c as J}from"./storage.C6ps69LL.js";/* empty css                       */import{_ as K}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{A as Q,a as U}from"./arrow-right.BOtVoS29.js";import{M as W,P as X,T as Y,L as Z}from"./type.tf3Lsrfr.js";import{C as $}from"./chevron-down.DApLtB9_.js";import{C as ss}from"./check.DlaGxj1r.js";import{P as es}from"./play.BE5k7Euy.js";import{M as os,S as ls}from"./sun.CjCweWVQ.js";import{e as rs,c as u,a as e,f as h,b as y,d as v,t as a,k as ts,F as b,g as C,r as f,i as I,j as ns,o as t,n as P}from"./runtime-core.esm-bundler.BNdVnsgS.js";import"./createLucideIcon.Cswp-0MP.js";const is=rs({__name:"LVCurriculumView",props:{curriculumId:{}},setup(M,{expose:c}){c();const m=M,s=f(!0),g=f(!1),p=f(null),l=f(null),n=f(null),i=f([]),k={en:"ðŸ‡¬ðŸ‡§",es:"ðŸ‡ªðŸ‡¸",fr:"ðŸ‡«ðŸ‡·",de:"ðŸ‡©ðŸ‡ª",it:"ðŸ‡®ðŸ‡¹",pt:"ðŸ‡µðŸ‡¹",ja:"ðŸ‡¯ðŸ‡µ",ko:"ðŸ‡°ðŸ‡·",zh:"ðŸ‡¨ðŸ‡³",ru:"ðŸ‡·ðŸ‡º",ar:"ðŸ‡¸ðŸ‡¦",hi:"ðŸ‡®ðŸ‡³",nl:"ðŸ‡³ðŸ‡±",sv:"ðŸ‡¸ðŸ‡ª",no:"ðŸ‡³ðŸ‡´"},T=I(()=>{if(!l.value)return 0;let o=0;return l.value.modules.forEach(r=>{r.topics.forEach(d=>{o+=d.lessons.length})}),o}),F=I(()=>{const o=J();if(!o||o.curriculumId!==m.curriculumId||!l.value)return null;for(const r of l.value.modules)for(const d of r.topics){const _=d.lessons.find(L=>L.id===o.lessonId);if(_)return _}return null});function D(o){return k[o?.toLowerCase()]||"ðŸŒ"}function S(){g.value=!g.value,document.documentElement.classList.toggle("dark",g.value),localStorage.setItem("theme",g.value?"dark":"light")}function V(o){const r=i.value.indexOf(o);r>=0?i.value.splice(r,1):i.value.push(o)}function w(o){return n.value?n.value.moduleProgress[o]?.status==="locked":!0}function E(o){return n.value?n.value.moduleProgress[o]?.status==="completed":!1}function B(o){if(!n.value)return"";const r=n.value.moduleProgress[o];return r?`${r.completedTopics}/${r.totalTopics} topics`:""}function N(o){if(!n.value)return"";const r=n.value.topicProgress[o];return r?`${r.completedLessons}/${r.totalLessons} lessons`:""}function R(o){return n.value?n.value.lessonProgress[o]?.status==="locked":!0}function j(o){if(!n.value)return!1;const r=n.value.lessonProgress[o];return r?.status==="available"||r?.status==="in-progress"}function z(o){return n.value?n.value.lessonProgress[o]?.status==="completed":!1}function x(o){if(l.value)for(const r of l.value.modules)for(const d of r.topics){const _=d.lessons.find(L=>L.id===o);if(_){H({curriculumId:m.curriculumId,moduleId:r.id,topicId:d.id,lessonId:_.id}),window.location.href=`/linguavault/learn/${m.curriculumId}/lesson/${o}`;return}}}function O(){F.value&&x(F.value.id)}ns(async()=>{g.value=document.documentElement.classList.contains("dark");try{const o=await q(m.curriculumId);if(!o){p.value="Could not find this curriculum. It may have been deleted.";return}l.value=o;const r=await G(m.curriculumId);if(n.value=r||null,l.value&&n.value){for(const d of l.value.modules)if(!w(d.id)&&!E(d.id)){i.value.push(d.id);break}i.value.length===0&&l.value.modules.length>0&&i.value.push(l.value.modules[0].id)}}catch(o){p.value="Failed to load curriculum data.",console.error(o)}finally{s.value=!1}});const A={props:m,isLoading:s,isDark:g,error:p,curriculum:l,progress:n,expandedModules:i,languageFlags:k,totalLessons:T,lastLesson:F,getLanguageFlag:D,toggleTheme:S,toggleModule:V,isModuleLocked:w,isModuleCompleted:E,getModuleProgressText:B,getTopicProgressText:N,isLessonLocked:R,isLessonAvailable:j,isLessonCompleted:z,openLesson:x,resumeLastLesson:O,get ArrowLeft(){return U},get Sun(){return ls},get Moon(){return os},get Play(){return es},get Check(){return ss},get Lock(){return Z},get ChevronDown(){return $},get Type(){return Y},get Pilcrow(){return X},get MessageCircle(){return W},get ArrowRight(){return Q}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}}),as={class:"lv-curriculum-view"},cs={class:"lv-nav"},us={class:"lv-nav-content"},ds={href:"/linguavault",class:"lv-back-link"},vs={class:"lv-nav-actions"},ms={key:0,class:"lv-loading"},gs={key:1,class:"lv-error-state"},fs={key:2,class:"lv-main"},_s={class:"lv-hero"},hs={class:"lv-hero-content"},ps={class:"lv-hero-top"},ks={class:"lv-hero-flag"},Fs={class:"lv-hero-badges"},Ls={class:"lv-badge lv-badge-primary"},ys={class:"lv-badge lv-badge-secondary"},bs={class:"lv-heading-1 lv-hero-title"},Cs={class:"lv-body lv-hero-desc"},Ps={class:"lv-hero-footer"},Ms={key:0,class:"lv-hero-progress-wrapper"},ws={class:"lv-progress-bar"},Es={class:"lv-caption"},xs={class:"lv-modules"},As=["onClick","disabled"],Is={class:"lv-module-status-icon"},Ts={key:2,class:"lv-icon-number"},Ds={class:"lv-module-info"},Ss={class:"lv-heading-4"},Vs={class:"lv-caption"},Bs={class:"lv-module-end"},Ns={class:"lv-caption lv-hide-mobile"},Rs={key:0,class:"lv-module-content lv-animate-fade-in"},js={class:"lv-topic-header"},zs={class:"lv-topic-title"},Os={class:"lv-lessons-grid"},qs=["onClick","disabled"],Gs={class:"lv-lesson-icon"},Hs={class:"lv-lesson-details"},Js={class:"lv-lesson-title"},Ks={class:"lv-lesson-meta"};function Qs(M,c,m,s,g,p){return t(),u("div",as,[e("nav",cs,[e("div",us,[e("a",ds,[y(s.ArrowLeft,{class:"lv-icon-sm"}),c[0]||(c[0]=e("span",null,"Dashboard",-1))]),e("div",vs,[e("button",{onClick:s.toggleTheme,class:"lv-btn lv-btn-ghost lv-btn-icon",title:"Toggle theme"},[s.isDark?(t(),v(s.Sun,{key:0,class:"lv-icon-sm"})):(t(),v(s.Moon,{key:1,class:"lv-icon-sm"}))])])])]),s.isLoading?(t(),u("div",ms,[...c[1]||(c[1]=[e("div",{class:"lv-loading-spinner"},null,-1),e("p",null,"Loading curriculum...",-1)])])):s.error?(t(),u("div",gs,[c[2]||(c[2]=e("div",{class:"lv-error-icon"},"ðŸ˜•",-1)),c[3]||(c[3]=e("h2",null,"Curriculum Not Found",-1)),e("p",null,a(s.error),1),c[4]||(c[4]=e("a",{href:"/linguavault",class:"lv-btn lv-btn-primary"},"Back to Dashboard",-1))])):s.curriculum?(t(),u("div",fs,[e("section",_s,[e("div",hs,[e("div",ps,[e("span",ks,a(s.getLanguageFlag(s.curriculum.meta.targetLanguageCode)),1),e("div",Fs,[e("span",Ls,a(s.curriculum.meta.proficiencyLevel),1),e("span",ys,a(s.curriculum.modules.length)+" Modules",1)])]),e("h1",bs,a(s.curriculum.meta.title),1),e("p",Cs,a(s.curriculum.meta.description),1),e("div",Ps,[s.progress?(t(),u("div",Ms,[e("div",ws,[e("div",{class:"lv-progress-fill",style:ts({width:s.progress.overallProgress+"%"})},null,4)]),e("span",Es,a(s.progress.overallProgress)+"% Complete",1)])):h("",!0),s.lastLesson?(t(),u("button",{key:1,onClick:s.resumeLastLesson,class:"lv-btn lv-btn-primary lv-btn-lg lv-resume-btn"},[c[5]||(c[5]=e("span",null,"Resume Learning",-1)),y(s.Play,{class:"lv-icon-sm",fill:"currentColor"})])):h("",!0)])])]),e("section",xs,[(t(!0),u(b,null,C(s.curriculum.modules,l=>(t(),u("div",{key:l.id,class:P(["lv-module",{"lv-module-locked":s.isModuleLocked(l.id),"lv-module-expanded":s.expandedModules.includes(l.id)}])},[e("button",{class:"lv-module-header",onClick:n=>s.toggleModule(l.id),disabled:s.isModuleLocked(l.id)},[e("div",Is,[s.isModuleCompleted(l.id)?(t(),v(s.Check,{key:0,class:"lv-icon-completed"})):s.isModuleLocked(l.id)?(t(),v(s.Lock,{key:1,class:"lv-icon-locked"})):(t(),u("span",Ts,a(l.order),1))]),e("div",Ds,[e("h3",Ss,a(l.title),1),e("p",Vs,a(l.description),1)]),e("div",Bs,[e("span",Ns,a(s.getModuleProgressText(l.id)),1),y(s.ChevronDown,{class:P(["lv-chevron",{"lv-chevron-open":s.expandedModules.includes(l.id)}])},null,8,["class"])])],8,As),s.expandedModules.includes(l.id)?(t(),u("div",Rs,[(t(!0),u(b,null,C(l.topics,n=>(t(),u("div",{key:n.id,class:"lv-topic"},[e("div",js,[e("h4",zs,a(n.title),1)]),e("div",Os,[(t(!0),u(b,null,C(n.lessons,i=>(t(),u("button",{key:i.id,class:P(["lv-lesson-card",{"lv-lesson-completed":s.isLessonCompleted(i.id),"lv-lesson-locked":s.isLessonLocked(i.id),"lv-lesson-active":s.isLessonAvailable(i.id)&&!s.isLessonCompleted(i.id)}]),onClick:k=>s.openLesson(i.id),disabled:s.isLessonLocked(i.id)},[e("div",Gs,[s.isLessonCompleted(i.id)?(t(),v(s.Check,{key:0,class:"lv-icon-sm"})):i.type==="vocabulary"?(t(),v(s.Type,{key:1,class:"lv-icon-sm"})):i.type==="grammar"?(t(),v(s.Pilcrow,{key:2,class:"lv-icon-sm"})):(t(),v(s.MessageCircle,{key:3,class:"lv-icon-sm"}))]),e("div",Hs,[e("span",Js,a(i.title),1),e("span",Ks,a(i.estimatedMinutes)+" min â€¢ "+a(i.type),1)]),s.isLessonLocked(i.id)?h("",!0):(t(),v(s.ArrowRight,{key:0,class:"lv-lesson-arrow"}))],10,qs))),128))])]))),128))])):h("",!0)],2))),128))])])):h("",!0)])}const te=K(is,[["render",Qs],["__scopeId","data-v-88fadf3a"]]);export{te as default};
