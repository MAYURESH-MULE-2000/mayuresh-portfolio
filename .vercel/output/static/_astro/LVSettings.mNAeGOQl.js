import{w as x,b as I,v as Q,a as X}from"./runtime-dom.esm-bundler.DfnH6WRO.js";import{d as E,e as Z,i as $,f as tt,h as lt,j as et,k as at}from"./storage.C6ps69LL.js";/* empty css                          */import{_ as ot}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{e as st,c as s,a as t,f as u,l as T,t as i,k as nt,h as c,F as L,g as S,w as M,r,i as V,j as it,o as n}from"./runtime-core.esm-bundler.BnNiQXWc.js";const rt=st({__name:"LVSettings",setup(R,{expose:l}){l();const m=r(!1),e=r([]),h=r(0),y=r(0),o=r(!1),f=r(!1),k=r(!1),p=r(null),F=r("merge"),w=r(null),b=r(null),P=r(!1),_=r(""),D={en:"ðŸ‡¬ðŸ‡§",es:"ðŸ‡ªðŸ‡¸",fr:"ðŸ‡«ðŸ‡·",de:"ðŸ‡©ðŸ‡ª",it:"ðŸ‡®ðŸ‡¹",pt:"ðŸ‡µðŸ‡¹",ja:"ðŸ‡¯ðŸ‡µ",ko:"ðŸ‡°ðŸ‡·",zh:"ðŸ‡¨ðŸ‡³",ru:"ðŸ‡·ðŸ‡º",ar:"ðŸ‡¸ðŸ‡¦",hi:"ðŸ‡®ðŸ‡³",nl:"ðŸ‡³ðŸ‡±",sv:"ðŸ‡¸ðŸ‡ª",no:"ðŸ‡³ðŸ‡´"},O=V(()=>e.value.length),U=V(()=>y.value===0?0:Math.round(h.value/y.value*100));function j(){m.value=!m.value,document.documentElement.classList.toggle("dark",m.value),localStorage.setItem("theme",m.value?"dark":"light")}function N(a){return D[a?.toLowerCase()]||"ðŸŒ"}function H(a){if(a===0)return"0 B";const v=1024,g=["B","KB","MB","GB"],d=Math.floor(Math.log(a)/Math.log(v));return Math.round(a/Math.pow(v,d)*100)/100+" "+g[d]}async function K(){o.value=!0;try{const a=await Z(),v=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),g=URL.createObjectURL(v),d=document.createElement("a");d.href=g,d.download=`linguavault-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(g)}catch(a){console.error("Failed to export data:",a),alert("Failed to export data. Please try again.")}finally{o.value=!1}}async function z(a){const v=a.target,g=v.files?.[0];if(g){try{const d=await g.text(),C=JSON.parse(d);if(!C.curriculums||!Array.isArray(C.curriculums)){alert("Invalid backup file format.");return}p.value=C,k.value=!0}catch(d){console.error("Failed to read import file:",d),alert("Failed to read backup file. Make sure it's a valid JSON file.")}v.value=""}}async function J(){if(p.value){f.value=!0;try{const a=await $({...p.value,version:p.value.version||"1.0.0",exportedAt:p.value.exportedAt||new Date().toISOString()},{merge:F.value==="merge",overwrite:F.value==="overwrite"});w.value=a,e.value=await E()}catch(a){console.error("Failed to import data:",a),alert("Failed to import data. Please try again.")}finally{f.value=!1}}}function q(){k.value=!1,p.value=null,w.value=null,F.value="merge"}function G(a,v){b.value={id:a,name:v}}async function W(){if(b.value)try{await tt(b.value.id),e.value=await E(),b.value=null}catch(a){console.error("Failed to delete curriculum:",a),alert("Failed to delete curriculum. Please try again.")}}async function Y(){if(_.value==="DELETE")try{await lt(),et(),window.location.href="/linguavault"}catch(a){console.error("Failed to clear data:",a),alert("Failed to clear data. Please try again.")}}async function B(){const a=await at();h.value=a.used,y.value=a.available}it(async()=>{m.value=document.documentElement.classList.contains("dark");try{e.value=await E(),await B()}catch(a){console.error("Failed to load settings:",a)}});const A={isDark:m,curriculums:e,storageUsed:h,storageAvailable:y,isExporting:o,isImporting:f,showImportConfirm:k,importContent:p,importMode:F,importResult:w,deleteTarget:b,showClearConfirm:P,clearConfirmText:_,languageFlags:D,curriculumCount:O,storagePercentage:U,toggleTheme:j,getLanguageFlag:N,formatBytes:H,exportData:K,handleImportFile:z,confirmImport:J,cancelImport:q,confirmDelete:G,confirmDeleteCurriculum:W,confirmClearAll:Y,loadStorageInfo:B};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}}),dt={class:"lv-settings"},vt={class:"lv-header"},ut={class:"lv-header-content"},ct={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},mt={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},pt={class:"lv-main"},gt={class:"lv-section"},ft={class:"lv-storage-card"},yt={class:"lv-storage-stats"},bt={class:"lv-stat-item"},ht={class:"lv-stat-value"},Ft={class:"lv-stat-item"},kt={class:"lv-stat-value"},wt={class:"lv-stat-item"},Ct={class:"lv-stat-value"},xt={class:"lv-storage-bar"},Et={class:"lv-caption"},Mt={class:"lv-section"},_t={class:"lv-data-actions"},Dt={class:"lv-card lv-action-card"},Bt={class:"lv-action-content"},At=["disabled"],It={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Tt={key:1,class:"lv-spinner-sm"},Lt={class:"lv-card lv-action-card"},St={class:"lv-action-content"},Vt={class:"lv-card lv-action-card lv-danger-card"},Rt={class:"lv-action-content"},Pt={key:0,class:"lv-section"},Ot={class:"lv-curriculum-list"},Ut={class:"lv-curriculum-info"},jt={class:"lv-curriculum-flag"},Nt={class:"lv-body"},Ht={class:"lv-caption"},Kt=["onClick"],zt={class:"lv-modal lv-animate-scale-in"},Jt={class:"lv-modal-body"},qt={class:"lv-body"},Gt={class:"lv-import-options"},Wt={class:"lv-radio-label"},Yt={class:"lv-radio-label"},Qt={key:0,class:"lv-import-result"},Xt={class:"lv-caption"},Zt={key:0,class:"lv-import-errors"},$t={class:"lv-modal-footer"},tl=["disabled"],ll={key:0,class:"lv-spinner-sm"},el={class:"lv-modal lv-animate-scale-in"},al={class:"lv-modal-header"},ol={class:"lv-modal-body"},sl={class:"lv-body"},nl={class:"lv-modal-footer"},il={class:"lv-modal lv-animate-scale-in"},rl={class:"lv-modal-header"},dl={class:"lv-modal-body"},vl={class:"lv-modal-footer"},ul=["disabled"];function cl(R,l,m,e,h,y){return n(),s("div",dt,[t("header",vt,[t("div",ut,[l[12]||(l[12]=t("a",{href:"/linguavault",class:"lv-back-link"},[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M19 12H5M12 19l-7-7 7-7"})]),t("span",null,"Dashboard")],-1)),l[13]||(l[13]=t("h1",{class:"lv-heading-4"},"Settings",-1)),t("button",{onClick:e.toggleTheme,class:"lv-btn lv-btn-ghost lv-btn-icon",title:"Toggle theme"},[e.isDark?(n(),s("svg",ct,[...l[10]||(l[10]=[t("circle",{cx:"12",cy:"12",r:"5"},null,-1),t("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"},null,-1)])])):(n(),s("svg",mt,[...l[11]||(l[11]=[t("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])]))])])]),t("div",pt,[t("section",gt,[l[17]||(l[17]=t("h2",{class:"lv-heading-3"},"Storage Information",-1)),t("div",ft,[t("div",yt,[t("div",bt,[l[14]||(l[14]=t("span",{class:"lv-stat-label"},"Curriculums",-1)),t("span",ht,i(e.curriculumCount),1)]),t("div",Ft,[l[15]||(l[15]=t("span",{class:"lv-stat-label"},"Storage Used",-1)),t("span",kt,i(e.formatBytes(e.storageUsed)),1)]),t("div",wt,[l[16]||(l[16]=t("span",{class:"lv-stat-label"},"Available",-1)),t("span",Ct,i(e.formatBytes(e.storageAvailable)),1)])]),t("div",xt,[t("div",{class:"lv-storage-fill",style:nt({width:e.storagePercentage+"%"})},null,4)]),t("span",Et,i(e.storagePercentage)+"% used",1)])]),t("section",Mt,[l[30]||(l[30]=t("h2",{class:"lv-heading-3"},"Data Management",-1)),t("div",_t,[t("div",Dt,[l[21]||(l[21]=t("div",{class:"lv-action-icon"},"ðŸ’¾",-1)),t("div",Bt,[l[19]||(l[19]=t("h3",{class:"lv-heading-4"},"Export All Data",-1)),l[20]||(l[20]=t("p",{class:"lv-body-sm"},"Download a backup of all your curriculums and progress. Keep this file safe to restore your learning data later.",-1)),t("button",{onClick:e.exportData,class:"lv-btn lv-btn-primary",disabled:e.isExporting},[e.isExporting?u("",!0):(n(),s("svg",It,[...l[18]||(l[18]=[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),t("polyline",{points:"7 10 12 15 17 10"},null,-1),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"},null,-1)])])),e.isExporting?(n(),s("span",Tt)):u("",!0),c(" "+i(e.isExporting?"Exporting...":"Export Backup"),1)],8,At)])]),t("div",Lt,[l[25]||(l[25]=t("div",{class:"lv-action-icon"},"ðŸ“¥",-1)),t("div",St,[l[22]||(l[22]=t("h3",{class:"lv-heading-4"},"Import Data",-1)),l[23]||(l[23]=t("p",{class:"lv-body-sm"},"Restore your learning data from a backup file. This will merge with existing data by default.",-1)),t("input",{type:"file",accept:".json",onChange:e.handleImportFile,id:"import-file",class:"lv-file-input"},null,32),l[24]||(l[24]=T('<label for="import-file" class="lv-btn lv-btn-primary" data-v-d537a92d><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-d537a92d><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" data-v-d537a92d></path><polyline points="17 8 12 3 7 8" data-v-d537a92d></polyline><line x1="12" y1="3" x2="12" y2="15" data-v-d537a92d></line></svg> Choose Backup File </label>',1))])]),t("div",Vt,[l[29]||(l[29]=t("div",{class:"lv-action-icon"},"ðŸ—‘ï¸",-1)),t("div",Rt,[l[27]||(l[27]=t("h3",{class:"lv-heading-4"},"Clear All Data",-1)),l[28]||(l[28]=t("p",{class:"lv-body-sm"},"Permanently delete all curriculums, progress, and settings. This action cannot be undone!",-1)),t("button",{onClick:l[0]||(l[0]=o=>e.showClearConfirm=!0),class:"lv-btn lv-btn-secondary"},[...l[26]||(l[26]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),c(" Clear Everything ",-1)])])])])])]),e.curriculums.length>0?(n(),s("section",Pt,[l[32]||(l[32]=t("h2",{class:"lv-heading-3"},"Manage Curriculums",-1)),t("div",Ot,[(n(!0),s(L,null,S(e.curriculums,o=>(n(),s("div",{key:o.id,class:"lv-card lv-curriculum-item"},[t("div",Ut,[t("span",jt,i(e.getLanguageFlag(o.meta.targetLanguageCode)),1),t("div",null,[t("h4",Nt,i(o.meta.title),1),t("span",Ht,i(o.modules.length)+" modules",1)])]),t("button",{onClick:f=>e.confirmDelete(o.id,o.meta.title),class:"lv-btn lv-btn-ghost lv-btn-sm lv-delete-btn",title:"Delete curriculum"},[...l[31]||(l[31]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,Kt)]))),128))])])):u("",!0),l[33]||(l[33]=T('<section class="lv-section" data-v-d537a92d><h2 class="lv-heading-3" data-v-d537a92d>About LinguaVault</h2><div class="lv-card lv-about-card" data-v-d537a92d><p class="lv-body" data-v-d537a92d> LinguaVault is a free, offline-first language learning platform. All your data is stored locally in your browser using IndexedDB. No server, no tracking, no accounts required. </p><div class="lv-about-features" data-v-d537a92d><div class="lv-about-feature" data-v-d537a92d><span class="lv-feature-icon" data-v-d537a92d>ðŸ”’</span><span data-v-d537a92d>Privacy First - Your data never leaves your device</span></div><div class="lv-about-feature" data-v-d537a92d><span class="lv-feature-icon" data-v-d537a92d>ðŸ“´</span><span data-v-d537a92d>Offline Support - Learn without internet</span></div><div class="lv-about-feature" data-v-d537a92d><span class="lv-feature-icon" data-v-d537a92d>ðŸŽ¯</span><span data-v-d537a92d>Self-Paced - Learn at your own speed</span></div><div class="lv-about-feature" data-v-d537a92d><span class="lv-feature-icon" data-v-d537a92d>ðŸ’¾</span><span data-v-d537a92d>Portable - Export and import your data anytime</span></div></div><p class="lv-caption" style="margin-top:var(--lv-space-4);" data-v-d537a92d> Version 1.0.0 | Built by <a href="/" class="lv-link" data-v-d537a92d>Mayuresh Mule</a></p></div></section>',1))]),e.showImportConfirm?(n(),s("div",{key:0,class:"lv-modal-backdrop",onClick:x(e.cancelImport,["self"])},[t("div",zt,[t("div",{class:"lv-modal-header"},[l[35]||(l[35]=t("h2",{class:"lv-heading-3"},"Import Data",-1)),t("button",{onClick:e.cancelImport,class:"lv-btn lv-btn-ghost lv-btn-icon"},[...l[34]||(l[34]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",Jt,[t("p",qt,"Found "+i(e.importContent?.curriculums.length||0)+" curriculum(s) in the backup file.",1),t("div",Gt,[t("label",Wt,[M(t("input",{type:"radio","onUpdate:modelValue":l[1]||(l[1]=o=>e.importMode=o),value:"merge",name:"import-mode"},null,512),[[I,e.importMode]]),l[36]||(l[36]=t("span",null,[t("strong",null,"Merge"),t("span",{class:"lv-caption"},"Keep existing data and add new items (recommended)")],-1))]),t("label",Yt,[M(t("input",{type:"radio","onUpdate:modelValue":l[2]||(l[2]=o=>e.importMode=o),value:"overwrite",name:"import-mode"},null,512),[[I,e.importMode]]),l[37]||(l[37]=t("span",null,[t("strong",null,"Overwrite"),t("span",{class:"lv-caption"},"Replace conflicting items with imported data")],-1))])]),e.importResult?(n(),s("div",Qt,[l[39]||(l[39]=t("p",null,[t("strong",null,"âœ“ Import Complete")],-1)),t("p",Xt,"Imported: "+i(e.importResult.imported)+" | Skipped: "+i(e.importResult.skipped),1),e.importResult.errors.length>0?(n(),s("div",Zt,[l[38]||(l[38]=t("p",{class:"lv-caption lv-text-error"},"Errors:",-1)),(n(!0),s(L,null,S(e.importResult.errors,(o,f)=>(n(),s("p",{key:f,class:"lv-caption"},i(o),1))),128))])):u("",!0)])):u("",!0)]),t("div",$t,[t("button",{onClick:e.cancelImport,class:"lv-btn lv-btn-secondary"},"Cancel"),t("button",{onClick:e.confirmImport,class:"lv-btn lv-btn-primary",disabled:e.isImporting||!!e.importResult},[e.isImporting?(n(),s("span",ll)):u("",!0),c(" "+i(e.isImporting?"Importing...":e.importResult?"Done":"Import"),1)],8,tl)])])])):u("",!0),e.deleteTarget?(n(),s("div",{key:1,class:"lv-modal-backdrop",onClick:l[5]||(l[5]=x(o=>e.deleteTarget=null,["self"]))},[t("div",el,[t("div",al,[l[41]||(l[41]=t("h2",{class:"lv-heading-3"},"Delete Curriculum",-1)),t("button",{onClick:l[3]||(l[3]=o=>e.deleteTarget=null),class:"lv-btn lv-btn-ghost lv-btn-icon"},[...l[40]||(l[40]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",ol,[t("p",sl,[l[42]||(l[42]=c("Are you sure you want to delete ",-1)),t("strong",null,i(e.deleteTarget.name),1),l[43]||(l[43]=c("?",-1))]),l[44]||(l[44]=t("p",{class:"lv-body-sm lv-text-error"},"This will permanently delete the curriculum and all your progress. This action cannot be undone.",-1))]),t("div",nl,[t("button",{onClick:l[4]||(l[4]=o=>e.deleteTarget=null),class:"lv-btn lv-btn-secondary"},"Cancel"),t("button",{onClick:e.confirmDeleteCurriculum,class:"lv-btn lv-btn-primary"},"Delete")])])])):u("",!0),e.showClearConfirm?(n(),s("div",{key:2,class:"lv-modal-backdrop",onClick:l[9]||(l[9]=x(o=>e.showClearConfirm=!1,["self"]))},[t("div",il,[t("div",rl,[l[46]||(l[46]=t("h2",{class:"lv-heading-3"},"Clear All Data",-1)),t("button",{onClick:l[6]||(l[6]=o=>e.showClearConfirm=!1),class:"lv-btn lv-btn-ghost lv-btn-icon"},[...l[45]||(l[45]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",dl,[l[47]||(l[47]=t("div",{class:"lv-warning-box"},[t("span",{class:"lv-warning-icon"},"âš ï¸"),t("p",{class:"lv-body"},[t("strong",null,"Warning:"),c(" This will permanently delete ALL curriculums, progress, and settings.")])],-1)),l[48]||(l[48]=t("p",{class:"lv-body-sm"},[c("Type "),t("strong",null,"DELETE"),c(" to confirm:")],-1)),M(t("input",{"onUpdate:modelValue":l[7]||(l[7]=o=>e.clearConfirmText=o),type:"text",class:"lv-input",placeholder:"Type DELETE",onKeyup:X(e.confirmClearAll,["enter"])},null,544),[[Q,e.clearConfirmText]])]),t("div",vl,[t("button",{onClick:l[8]||(l[8]=o=>e.showClearConfirm=!1),class:"lv-btn lv-btn-secondary"},"Cancel"),t("button",{onClick:e.confirmClearAll,class:"lv-btn lv-btn-primary",disabled:e.clearConfirmText!=="DELETE"}," Clear Everything ",8,ul)])])])):u("",!0)])}const bl=ot(rt,[["render",cl],["__scopeId","data-v-d537a92d"]]);export{bl as default};
