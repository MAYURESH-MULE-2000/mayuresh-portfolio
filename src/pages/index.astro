---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.vue";
import SocialSidebar from "../components/SocialSidebar.vue";
import EmailSidebar from "../components/EmailSidebar.vue";
import AnimatedPattern from "../components/AnimatedPattern.vue";
import ImpactStories from "../components/ImpactStories.vue";
import HowIWork from "../components/HowIWork.vue";
import WhereImWorking from "../components/WhereImWorking.vue";
import LetsConnect from "../components/LetsConnect.vue";
import MagnifyText from "../components/MagnifyText.vue";

import { getCaseStudies, getProjects, getBlogs } from "../lib/content";

const caseStudies = await getCaseStudies();
const projects = await getProjects();
const blogs = await getBlogs();

const resources = [
  ...caseStudies.map((item: any) => ({
    id: item.slug,
    type: "case-study",
    title: item.title,
    label: item.category,
    slug: item.slug,
    thumbnail: item.heroImage || "",
    order: item.order, // Preserve order field
  })),
  ...projects.map((item: any) => ({
    id: item.slug,
    type: "project",
    title: item.title,
    label: item.category,
    slug: item.slug,
    thumbnail: item.heroImage || "",
    order: item.order, // Preserve order field
  })),
  ...blogs.map((item: any) => ({
    id: item.slug,
    type: "blog",
    title: item.title,
    label: item.category,
    slug: item.slug,
    thumbnail: item.heroImage || "",
    order: item.order, // Preserve order field
  })),
];

console.log("BEFORE SORT:");
resources.forEach((r, i) =>
  console.log(`${i + 1}. ${r.title} (order: ${r.order})`),
);

const sortedResources = resources.sort((a, b) => a.order - b.order);

console.log("AFTER SORT:");
sortedResources.forEach((r, i) =>
  console.log(`${i + 1}. ${r.title} (order: ${r.order})`),
);
---

<Layout
  title="Mayuresh Mule - UX Engineer & Product Builder"
  description="Portfolio of Mayuresh Mule â€“ UX Engineer and Product Builder."
>
  <Header client:load />
  <SocialSidebar client:load />
  <EmailSidebar client:load />

  <main class="px-16 md:px-32 py-20 pt-32">
    <div class="max-w-7xl mx-auto">
      <div class="grid md:grid-cols-2 gap-12 items-center mb-16">
        <div
          class="aspect-video bg-gray-200 dark:bg-gray-800 rounded-3xl overflow-hidden transition-colors duration-300"
        >
          <div
            class="w-full h-full flex items-center justify-center text-gray-400 transition-colors duration-300"
          >
            Video Placeholder
          </div>
        </div>

        <div class="text-center md:text-left">
          <p class="text-xl mb-2">
            <MagnifyText size={100} :zoom={1.4} client:visible>
              I'm a <strong class="font-bold underline cursor-pointer"
                >UX Engineer</strong
              > and
              <strong class="font-bold underline cursor-pointer"
                >Product Builder</strong
              > focused on creating user-centric experiences through design-driven
              development.
            </MagnifyText>
          </p>

          <p
            class="text-gray-600 dark:text-gray-400 text-lg transition-colors duration-300"
          >
            <MagnifyText size={100} :zoom={1.8} client:visible>
              2+ years of experience | Mumbai, India
            </MagnifyText>
          </p>
        </div>
      </div>

      <AnimatedPattern client:load />

      <ImpactStories items={sortedResources} client:visible />

      <HowIWork client:visible />
      <WhereImWorking client:visible />
      <LetsConnect client:visible />
    </div>
  </main>
</Layout>
